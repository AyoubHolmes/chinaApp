<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Wizard V1</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css">
	<link rel="stylesheet" href="assets/css/animate.min.css">
	<link rel="stylesheet" href="assets/css/fontawesome-all.css">
	<link rel="stylesheet" href="assets/css/style.css">

	<link rel="stylesheet" type="text/css" href="assets/css/colors/switch.css">
	<!-- Color Alternatives -->
	<link href="assets/css/colors/color-2.css" rel="alternate stylesheet" type="text/css" title="color-2">
	<link href="assets/css/colors/color-3.css" rel="alternate stylesheet" type="text/css" title="color-3">
	<link href="assets/css/colors/color-4.css" rel="alternate stylesheet" type="text/css" title="color-4">
	<link href="assets/css/colors/color-5.css" rel="alternate stylesheet" type="text/css" title="color-5">
</head>


<body>

	<script src="assets/js/jquery-3.3.1.min.js"></script>
	<script src="assets/js/jquery.validate.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/main.js"></script>
	<script src="assets/js/dataHandler.js"></script>
	<script src="assets/js/switch.js"></script>
	<div class="clearfix"></div>


	<div class="wrapper">
		<div class="steps-area steps-area-fixed">
			<div class="image-holder">
				<img src="assets/img/side-img.jpg" alt="">
			</div>
			<div class="steps clearfix">
				<ul class="tablist multisteps-form__progress">
					<li class="multisteps-form__progress-btn js-active current">
						<span>1</span>
					</li>
					<li class="multisteps-form__progress-btn">
						<span>2</span>
					</li>
					<li class="multisteps-form__progress-btn">
						<span>3</span>
					</li>
					<li class="multisteps-form__progress-btn last">
						<span>4</span>
					</li>
				</ul>
			</div>
		</div>
		<form class="multisteps-form__form" action="#" id="wizard-0" method="POST">
			<div class="form-area position-relative">
				<!-- div 2 -->
				<div class="multisteps-form__panel js-active" data-animation="slideHorz">
					<div class="wizard-forms">
						<div class="inner pb-100 clearfix">
							<div class="form-content pera-content">
								<div class="step-inner-content">
									<span class="step-no bottom-line">Step 1</span>
									<div class="step-progress float-right">
										<span>1 of 4 completed</span>
										<div class="step-progress-bar">
											<div class="progress">
												<div class="progress-bar"></div>
											</div>
										</div>
									</div>

									<h2>Personal information</h2>
									<p></p>

									<div class="form-inner-area">
										<input type="text" id="fullname" name="fullname" onchange="fullnameHandler()" class="form-control required" minlength="2" id="fullname" placeholder="First and last name *" required>
										<input type="text" id="phone" name="phone" onchange="phoneHandler()" placeholder="Phone" class="required" required>
									</div>
									<div class="gender-selection" onchange="genderHandler()">
										<h3>Gender:</h3>
										<label>
											<input type="radio" id="gender" name="gender" value="Male" class="requied">
											<span class="checkmark"></span>Male
										</label>
										<label>
											<input type="radio"  id="gender" name="gender" value="Female">
											<span class="checkmark"></span>Female
										</label>
									</div>
									<div class="form-inner-area">
										<label for="birthdate" class="col-form-label">Date of birth <span style="color: red;">*</span>:</label>
										<input type="date" onchange="birthdateHandler()" id="birthdate" name="birthdate" class="form-control required" placeholder="date of birth *" required>
										<input type="text" onchange="cityHandler()" id="city" name="city" class="form-control required" placeholder="City of birth *" required>
										<input type="text" onchange="addressHandler()" id="address" name="address" class="form-control required" placeholder="Current adress *" required>
										<input type="text" onchange="passportHandler()" id="passport" name="passport" class="form-control required" placeholder="Passport Number *" required>
										<label for="passport_issue" class="col-form-label">Passport issue date <span style="color: red;">*</span>:</label>
										<input type="date" onchange="passportIssueHandler()" id="passport_issue" name="passport_issue" class="form-control required" placeholder="Passport issue date *" required>
										<label for="passport_expiry" class="col-form-label">Passport expiry date <span style="color: red;">*</span>:</label>
										<input type="date" onchange="passportExpiryHandler()" id="passport_expiry" name="passport_expiry" class="form-control required" placeholder="Passport expiry date *" required>
									</div>
									<div class="gender-selection" onchange="studiedHandler()">
										<h3>Already Studied In china? :</h3>
										<label>
											<input type="radio" id="studied"  name="studied" value="yes">
											<span class="checkmark"></span>Yes
										</label>
										<label>
											<input type="radio" id="studied"  name="studied" value="no">
											<span class="checkmark"></span>No
										</label>
									</div>
									<div id="studiedTrue"></div>
									<!-- <div class="upload-documents">
										<h3>Upload you image: (If they are available now)</h3>
										<div class="upload-araa bg-white">
											<input type="hidden" value="" name="fileContent" id="fileContent">
											<input type="hidden" value="" name="filename" id="filename">
											<div class="upload-icon float-left">
												<i class="fas fa-cloud-upload-alt"></i>
											</div>
											<div class="upload-text">
												<span>( File accepted: pdf. doc/ docx -
													Max file size : 150kb for demo limit )</span>
											</div>
											<div class="upload-option text-center">
												<label for="attach">Upload The Documents</label>
												<input id="attach" style="visibility:hidden;" type="file">
											</div>
										</div>
									</div> --> 
								</div>
							</div>
						</div>
					</div>
					<div class="actions">
						<ul>
							<li class="disable" aria-disabled="true"><span class="js-btn-next" id="backward-0" title="NEXT">Backward <i class="fa fa-arrow-right"></i></span></li>
							<li><span class="js-btn-next" title="NEXT" id="submitButton-0">NEXT <i class="fa fa-arrow-right"></i></span></li>
						</ul>
					</div>
				</div>
			</form>
			<form class="multisteps-form__form" action="#" id="wizard-1" method="POST">
				<!-- div 3 -->
				<div class="multisteps-form__panel" data-animation="slideHorz">
					<div class="wizard-forms">
						<div class="inner pb-100 clearfix">
							<div class="form-content pera-content">
								<div class="step-inner-content">
									<span class="step-no bottom-line">Step 2</span>
									<div class="step-progress float-right">
										<span>2 of 4 completed</span>
										<div class="step-progress-bar">
											<div class="progress">
												<div class="progress-bar" style="width:50%"></div>
											</div>
										</div>
									</div>
									<h2>Family information</h2>
									<p></p>
									<div class="form-inner-area">
										<input type="text" id="father_fname" onchange="fatherFnameHandler()" name="father_fname" class="form-control  required" minlength="2" placeholder="Father's first name *" >
										<input type="text" id="father_sname" onchange="fatherSnameHandler()" name="father_sname" class="form-control required " minlength="2" placeholder="Father'd last name *">
										<input type="text" id="father_occupation" onchange="fatherOccupationHandler()" name="father_occupation" class="form-control required " placeholder="Father's occupation *">
										<input type="text" id="father_phone" onchange="fatherPhoneHandler()" name="father_phone" placeholder="Father's phone number" class="">
										<input type="text" id="mother_fname" onchange="motherFnameHandler()" name="mother_fname" class="form-control required " minlength="2" placeholder="Mother's first name *">
										<input type="text" id="mother_sname" onchange="motherSnameHandler()" name="mother_sname" class="form-control required " minlength="2" placeholder="Mother'd last name *">
										<input type="text" id="mother_occupation" onchange="motherOccupationHandler()" name="mother_occupation" class="form-control required " placeholder="Mother's occupation *">
										<input type="text" id="mother_phone" onchange="motherPhoneHandler()" name="mother_phone" placeholder="Mother's phone number" class="">

									</div>
								</div>
							</div>
						</div>
						<!-- ./inner -->
						<div class="actions">
							<ul>
								<li><span class="js-btn-prev" title="BACK"><i class="fa fa-arrow-left"></i> BACK </span></li>
								<li><span class="js-btn-next" title="NEXT" id="submitButton-1">NEXT <i class="fa fa-arrow-right"></i></span></li>
							</ul>
						</div>
					</div>
				</div>
			</form>
				<!-- div 4 -->
			<form class="multisteps-form__form" action="#" id="wizard-2" method="POST">
				<div class="multisteps-form__panel" data-animation="slideHorz">
					<div class="wizard-forms">
						<div class="inner pb-100 clearfix">
							<div class="form-content pera-content">
								<div class="step-inner-content">
									<span class="step-no bottom-line">Step 3</span>
									<div class="step-progress float-right">
										<span>3 of 4 completed</span>
										<div class="step-progress-bar">
											<div class="progress">
												<div class="progress-bar" style="width:75%"></div>
											</div>
										</div>
									</div>
									<h3>Educational Background <span><i id="add_ed" class="fas fa-plus-circle"></i></span></h3>
									<div class="form-inner-area">
										<div class="d-flex edForm" id="ed-0">
											<input type="text" name="ed_from" class="form-control " minlength="2" placeholder="From *">
											<input type="text" name="ed_to" class="form-control " minlength="2" placeholder="To *">
											<input type="text" name="ed_institute" class="form-control " placeholder="Institute *">
											<input type="text" name="ed_degree" placeholder="Degree" class="">
											<input type="text" name="ed_major" class="form-control " minlength="2" placeholder="Major">
										</div>
										<div class="d-flex edForm" id="ed-1">
											<input type="text" name="ed_from" class="form-control " minlength="2" placeholder="From *">
											<input type="text" name="ed_to" class="form-control " minlength="2" placeholder="To *">
											<input type="text" name="ed_institute" class="form-control " placeholder="Institute *">
											<input type="text" name="ed_degree" placeholder="Degree" class="">
											<input type="text" name="ed_major" class="form-control " minlength="2" placeholder="Major">
											<!--<button class="delete-button" id="2"><span><i class="fas fa-trash"></i></span></button>-->
										</div>
										<div class="d-flex edForm" id="ed-2">
											<input type="text" name="ed_from" class="form-control " minlength="2" placeholder="From *">
											<input type="text" name="ed_to" class="form-control " minlength="2" placeholder="To *">
											<input type="text" name="ed_institute" class="form-control " placeholder="Institute *">
											<input type="text" name="ed_degree" placeholder="Degree" class="">
											<input type="text" name="ed_major" class="form-control " minlength="2" placeholder="Major">
											<!--<button class="delete-button" id="3"><span><i class="fas fa-trash"></i></span></button>-->
										</div>
										<div id="ed_list2"></div>
									</div>
									<h3>Professional Background  <span><i id="add_pr" class="fas fa-plus-circle"></i></span></h3>
									<div class="form-inner-area">
										<div class="d-flex prForm" id="pr-0">
											<input type="text" name="pr_from" class="form-control " minlength="2" placeholder="From *">
											<input type="text" name="pr_to" class="form-control " minlength="2" placeholder="To *">
											<input type="text" name="pr_institute" class="form-control " placeholder="Institute *">
											<input type="text" name="pr_degree" placeholder="Department" class="">
											<input type="text" name="pr_post" class="form-control " minlength="2" placeholder="Post">
										</div>
										<div class="d-flex prForm" id="pr-1">
											<input type="text" name="pr_from" class="form-control " minlength="2" placeholder="From *">
											<input type="text" name="pr_to" class="form-control " minlength="2" placeholder="To *">
											<input type="text" name="pr_institute" class="form-control " placeholder="Institute *">
											<input type="text" name="pr_degree" placeholder="Department" class="">
											<input type="text" name="pr_post" class="form-control " minlength="2" placeholder="Post">
										</div>
										<div class="d-flex prForm" id="pr-2">
											<input type="text" name="pr_from" class="form-control " minlength="2" placeholder="From *">
											<input type="text" name="pr_to" class="form-control " minlength="2" placeholder="To *">
											<input type="text" name="pr_institute" class="form-control " placeholder="Institute *">
											<input type="text" name="pr_department" placeholder="Department" class="">
											<input type="text" name="pr_post" class="form-control " minlength="2" placeholder="Post">
										</div>
										<div id='pr_list2'></div>
									</div>
								</div>
								<h3>Do you have a language certificate? (TOEFL/ IELTS/ HSK ...)</h3>
								<div class="form-inner-area">
									<input type="text" name="certif" placeholder="..." onchange="langcertifHandler()">

								</div>
							</div>
						</div>
						<!-- /.inner -->
						<div class="actions">
							<ul>
								<li><span class="js-btn-prev" title="BACK"><i class="fa fa-arrow-left"></i> BACK </span></li>
								<li><span class="js-btn-next" title="NEXT" id="submitButton-2">NEXT <i class="fa fa-arrow-right"></i></span></li>
							</ul>
						</div>
					</div>
				</div>
			</form>
				<!-- div 5 -->
			<form class="multisteps-form__form" action="#" id="wizardFinal" method="POST">
				<div class="multisteps-form__panel" data-animation="slideHorz">
					<div class="wizard-forms">
						<div class="inner pb-100 clearfix">
							<div class="form-content pera-content">
								<div class="step-inner-content">
									<span class="step-no bottom-line">Step 4</span>
									<div class="step-progress float-right">
										<span>4 of 4 completed</span>
										<div class="step-progress-bar">
											<div class="progress">
												<div class="progress-bar" style="width:100%"></div>
											</div>
										</div>
									</div>
									<h2>Study plan</h2>
									<p></p>
									<div class="step-content-field">
										<div class="gender-selection" onchange="planHandler()">
											<h3>Degree</h3><br>
											<label>
												<input type="radio" name="plan" value="bachelor">
												<span class="checkmark"></span>Bachelor
											</label>
											<label>
												<input type="radio" name="plan" value="master">
												<span class="checkmark"></span>Master
											</label>
											<label>
												<input type="radio" name="plan" value="phd">
												<span class="checkmark"></span>Phd
											</label>
											<label>
												<input type="radio" name="plan" value="nodegree">
												<span class="checkmark"></span>No degree (Chinese Language)
											</label>
										</div>
										<div class="form-inner-area">
											<input type="text" name="plan_major" class="form-control " minlength="2" placeholder="Major *" onchange="majorHandler()">
										</div>

									</div>
								</div>
							</div>
						</div>
						<!-- /.inner -->
						<div class="actions">
							<ul>
								<li><span class="js-btn-prev" title="BACK"><i class="fa fa-arrow-left"></i> BACK </span></li>
								<li><button type="submit" title="NEXT" id="submitButtonFinal">SUBMIT <i class="fa fa-arrow-right"></i></button></li>
							</ul>
						</div>
					</div>
				</div>
			</form>
	</div>
	
	<script>

	jQuery.each( [ "put", "delete" ], function( i, method ) {
		jQuery[ method ] = function( url, data, callback, type ) {
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}
	
		return jQuery.ajax({
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		});
		};
	});

		$('#submitButton-0').click(() => {
			fetch('http://localhost:5000/api//personaldata/' + personalData.userId)
				.then(res => {
					if (res.status === 200) {
						$.put('http://localhost:5000/api/personaldata/' + personalData.userId, personalData, (data, status) => {
						})
					}
					else if (res.status === 404)
						$.post('http://localhost:5000/api/personaldata/', personalData, (data, status) => {
						})
				})
				.catch(err => {
					
				});
		})
		$('#submitButton-1').click(() => {
			fetch('http://localhost:5000/api/familydata/' + familyData.userId)
				.then(res => {
					if (res.status === 200) {
						$.put('http://localhost:5000/api/familydata/' + familyData.userId, familyData, (data, status) => {
						})
					}
					else if (res.status === 404){
						$.post('http://localhost:5000/api/familydata/', familyData, (data, status) => {
						})}
				})
				.catch(err => {
					
				});
		})
		$('#submitButton-2').click(() => {
			fetch('http://localhost:5000/api/eddata/' + edDatas.userId)
				.then(res => {
					if (res.status === 200) {
						edDatas.majors = JSON.stringify(edDatas.majors);
						console.log(edDatas)
						$.put('http://localhost:5000/api/eddata/' + edDatas.userId, edDatas, (data, status) => {
						})
					}
					else if (res.status === 404){
						edDatas.majors = JSON.stringify(edDatas.majors);
						console.log(edDatas);
						$.post('http://localhost:5000/api/eddata/', edDatas, (data, status) => {
						})}
				})
				.catch(err => {
					
				});
			fetch('http://localhost:5000/api/prdata/' + prDatas.userId)
				.then(res => {
					if (res.status === 200) {
						prDatas.posts = JSON.stringify(prDatas.posts);
						$.put('http://localhost:5000/api/prdata/' + prDatas.userId, prDatas, (data, status) => {
						})
					}
					else if (res.status === 404){
						prDatas.posts = JSON.stringify(prDatas.posts);
						$.post('http://localhost:5000/api/prdata/', prDatas, (data, status) => {
						})}
				})
				.catch(err => {
				});
		})
		$('#submitButtonFinal').click((event) => {
			event.preventDefault();
			console.log(personalData)
			console.log(familyData)
			console.log(edDatas)
			console.log(prDatas)
			console.log(studyPlan)
			fetch('http://localhost:5000/api/studyplan/' + studyPlan.userId)
				.then(res => {
					if (res.status === 200) {
						$.put('http://localhost:5000/api/studyplan/' + studyPlan.userId, studyPlan, (data, status) => {
						})
					}
					else if (res.status === 404){
						$.post('http://localhost:5000/api/studyplan/', studyPlan, (data, status) => {
						})}
				})
				.catch(err => {
					console.error(err);
				});
			$.get('http://localhost:5000/apply/user?id=' + personalData.userId, familyData, (data, status) => {
        	window.location.href = ('http://localhost:5000/application?id=' + personalData.userId);            
    		})
		})

		const langcertifHandler = () => prDatas.langCertif = $('input[name="certif"]').val();
		const planHandler= () => studyPlan.degree = $('input[name="plan"]:checked').val();
		const majorHandler = () => studyPlan.major = $('input[name="plan_major"]').val();
		const studiedHandler = () => {
			personalData.studied = $('input[name="studied"]:checked').val();
			if(personalData.studied === 'no')
				$("#studied_true").remove();
			if(personalData.studied === 'yes')
			{
				$("#studiedTrue").html("<div id=\"studied_true\" class=\"form-inner-area gender-selection\">\
										<h3>If yes :</h3>\
										<div class=\"form-inner-area\">\
											<input type=\"text\" id=\"studied_city\" onchange=\"studiedCityHandler()\" name=\"studied_city\" class=\"form-control\" minlength=\"2\" placeholder=\"Which city? \">\
											<input type=\"text\" id=\"studied_university\" onchange=\"studiedUniversityHandler()\" name=\"studied_university\" class=\"form-control\" minlength=\"2\" placeholder=\"Which university? \">\
											<input type=\"text\" id=\"studied_major\" onchange=\"studiedMajorHandler()\" name=\"studied_major\" class=\"form-control\" minlength=\"2\" placeholder=\"Which major? \">\
										</div>\
									</div>");
			}
		}
		const studiedCityHandler = () => {
			personalData.studiedCity = $('input[id="studied_city"]').val();
		}

		const studiedUniversityHandler = () => {
			personalData.studiedUniversity = $('input[id="studied_university"]').val();
		}

		const studiedMajorHandler = () => {
			personalData.studiedMajor = $('input[id="studied_major"]').val();;
		}

		$("#files").change(function() {
			filename = this.files[0].name
		});
		function UploadFile() {
			var reader = new FileReader();
			var file = document.getElementById('attach').files[0];
			reader.onload = function() {
				document.getElementById('fileContent').value = reader.result;
				document.getElementById('filename').value = file.name;
				document.getElementById('wizard').submit();
			}
			reader.readAsDataURL(file);
		}
	</script>
</body>

</html>